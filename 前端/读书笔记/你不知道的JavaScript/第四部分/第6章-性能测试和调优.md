## 性能测试和调优

- 我们应该关注优化的大局，而不是担心这些微观性能的细微差别。\
- 花费在优化关键路径上的时间不是浪费，不管节省的时间多么 少;而花在非关键路径优化上的时间都不值得，不管节省的时间多么多。

> 尾调用优化

- 在`strict`模式下应用。
- `尾调用`即出现在另一个函数`结尾`处的函数调用。
- 调用一个新的函数需要额外的一块预留内存来管理`调用栈`，称为`栈帧`。
- 如果支持`TCO`的引擎能够意识到`foo(y+1)`调用位于尾部，这意味着`bar(..)`基本上已经完成了，那么在调用 `foo(..)` 时，它就不需要创建一个新的`栈帧`，而是可以重用已有的`bar(..)`的栈帧。这样不仅速度更快，也更节省内存。

    ```

    function foo(x) {
        return x;
    }

    function bar(y) {
        return foo( y + 1 ); // 尾调用
    }

    ```

- `尾调用`优化在处理`递归`时，有显著的优化效果，引擎不再需要限制`栈深度`。
