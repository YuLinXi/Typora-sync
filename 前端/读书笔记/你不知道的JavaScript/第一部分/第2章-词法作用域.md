## 词法作用域

> 前言

- 作用域有两种主要的工作模型：词法作用域（最为普遍）、动态作用域。
- JavaScript采用的是`词法作用域`。
- 词法作用域是一套关于引擎如何寻找变量以及在何处找到变量的规则。

> 词法阶段

- `词法作用域`是定义在`词法阶段`的作用域，是由你在写代码时将变量和块作用域写在哪里决定的。
- 作用域查找会在找到第一个匹配的标记符时停止。
- 词法作用域查找只会查找一级标记符，如`foo.bar.baz`，词法作用域只负责找到`foo`标记符。

> 欺骗词法作用域

- 欺骗词法作用域会导致性能下降。

- `eval()`：可以接受一个字符串为参数，并将其中的内容视为好像在书写时就存在于程序中这个位置的代码，达到在`运行期`修改`书写期`的词法作用域。

- `with()`：可以将一个没有或有多个属性的对象处理为一个完全隔离的词法作用域。

- 性能：`eval`和`with`的大量使用会导致性能急剧下降；JavaScript的引擎在编译阶段会进行数项性能优化，其中有些优化的目的是预先确定所有变量和函数的定义和位置。

  ​	