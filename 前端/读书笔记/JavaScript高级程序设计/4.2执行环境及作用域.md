4.2 执行环境及作用域
---

> 前言

- 每个执行环境都有一个与之关联的`变量`对象，环境中定义的所有变量和函数都保存在这个对象中，代码无法访问，但解析器可以。
- 某个执行环境中的所有代码执行完毕后，该环境被销毁，保存在其中的所有变量和函数定义也随之销毁。
- 全局执行环境直到应用程序退出时才会被销毁。
- 当代码在一个环境中执行时，会创建变量对象的一个`作用域链`：保证对执行环境有权访问的所有变量和函数的有序访问。
- 标记符解析是沿着`作用域链`一级一级的搜索标记符的过程。
- 内部环境可以通过`作用域链`访问所有的外部父环境，但外部环境不能访问内部环境中任何变量和函数。

> 延长作用域链

- 使用`with`语句和`try-catch`的`catch`块语句可以在作用域链的*前端*临时增加一个*变量对象*，以延长作用域链，该变量对象会在代码执行后被移除。
- *IE8*及以前的版本，在`catch`语句中捕获的错误对象会被添加到执行环境的变量对象，而不是`catch`语句的变量对象中，IE9修复了这个问题。
- `with`语句将指定的对象添加到作用域链中，`catch`语句是创建一个新的变量对象。

> 没有块级作用域

- ECMAScript6之前只有函数作用域。